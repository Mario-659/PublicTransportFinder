<html>
<head>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0px; padding: 0px }
    #map_canvas { height: 100%; background-color: #666970; }
  </style>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC5Ai7YRP75d-XTlDhpt-ORGVj1WySzPok&callback=initMap"></script>
  </script>
  <script type="text/javascript">
    function initialize() {
      var latlng = new google.maps.LatLng(51.107883, 17.038538);
      var myOptions = {
        zoom: 12,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: false,
        navigationControl: false,
        streetViewControl: false,
        fullscreenControl: false,
        backgroundColor: "#666970"
      };

      document.geocoder = new google.maps.Geocoder();
      document.map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

      document.zoomIn = function zoomIn() {
        var zoomLevel = document.map.getZoom();
        if (zoomLevel <= 20) document.map.setZoom(zoomLevel + 1);
      }

      document.zoomOut = function zoomOut() {
        var zoomLevel = document.map.getZoom();
        if (zoomLevel > 0) document.map.setZoom(zoomLevel - 1);
      }

      document.setMapTypeRoad = function setMapTypeRoad() {
        document.map.setMapTypeId(google.maps.MapTypeId.ROADMAP);
      }
      document.setMapTypeSatellite = function setMapTypeSatellite() {
        document.map.setMapTypeId(google.maps.MapTypeId.SATELLITE);
      }
      document.setMapTypeHybrid = function setMapTypeHybrid() {
        document.map.setMapTypeId(google.maps.MapTypeId.HYBRID);
      }
      document.setMapTypeTerrain = function setMapTypeTerrain() {
        document.map.setMapTypeId(google.maps.MapTypeId.TERRAIN);
      }

      var busMarkers = [];
      var tramMarkers = [];

      function addMarker(x, y, line, markersArray){
        var marker = new google.maps.Marker({
          position: new google.maps.LatLng(x, y),
          map: document.map,
          label: line
        });
        markersArray.push(marker);
      }

      function extractMarkers(lines, markersArray){
        for (let i = 0; i < lines.length; i++) {
          for (let j = 0; j < lines[i].length; j++) {
            addMarker(lines[i][j].x, lines[i][j].y, lines[i][j].name, markersArray)
          }
        }
      }

      document.setMarkers = function setMarkers(lines, markersArray) {
        deleteMarkers(markersArray);
        extractMarkers(lines, markersArray);
      }

      document.setBusMarkers = function setBusMarkers(lines){
        document.setMarkers(lines, busMarkers)
      }

      document.setTramMarkers = function setTramMarkers(lines){
        document.setMarkers(lines, tramMarkers)
      }


      function setMapOnAll(markers, map) {
        for ( let i=0; i<markers.length; i++){
          markers[i].setMap(map);
        }
      }

      function deleteMarkers(markersArray){
        setMapOnAll(markersArray, null);
        markersArray = null;
      }
    }
  </script>
</head>
<body onload="initialize()">
<div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html>